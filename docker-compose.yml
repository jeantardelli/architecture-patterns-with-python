version: "3"
services:

    app:
        build:
            context: .
            dockerfile: Dockerfile
        depends_on:
            - mysql
        environment:
            - MYSQL_HOST=mysql
            - MYSQL_PASSWORD=abc123
            - API_HOST=app
            - PYTHONDONTWRITEBYTECODE=1
        volumes:
            - ./src:/src
            - ./tests:/tests
        ports:
            - "5005:80"

    mysql:
        image: mysql
        environment:
            - MYSQL_ROOT_PASSWORD=abc123
            - MYSQL_DATABASE=allocation
        ports:
            - "33060:3306"
